{% extends "admin/base_admin.html" %}

{% block admin_content %}
<h1 class="text-2xl font-bold mb-6">{% if user %}Editar{% else %}Nuevo{% endif %} Usuario</h1>

<form method="POST" class="bg-white p-6 rounded-lg shadow max-w-2xl">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
            <label class="block text-sm font-medium text-gray-700">Nombre</label>
            <input type="text" name="first_name" value="{{ user.first_name if user else '' }}" required
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700">Apellido</label>
            <input type="text" name="last_name" value="{{ user.last_name if user else '' }}" required
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" name="email" value="{{ user.email if user else '' }}" required
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700">Password {% if user %}(Dejar en blanco para
                mantener){% endif %}</label>
            <input type="password" name="password" {% if not user %}required{% endif %}
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700">Rol</label>
            <select name="role" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2 bg-white">
                <option value="user" {% if user and user.role=='user' %}selected{% endif %}>Usuario</option>
                <option value="supervisor" {% if user and user.role=='supervisor' %}selected{% endif %}>Supervisor
                </option>
                <option value="admin" {% if user and user.role=='admin' %}selected{% endif %}>Administrador</option>
            </select>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700">√Årea</label>
            <select name="area_id" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2 bg-white">
                <option value="">Ninguna</option>
                {% for area in areas %}
                <option value="{{ area.id }}" {% if user and user.area_id==area.id %}selected{% endif %}>{{ area.name }}
                </option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="mt-6 flex justify-end">
        <a href="{{ url_for('admin.users_list') }}"
            class="mr-4 px-4 py-2 text-gray-700 hover:text-gray-900">Cancelar</a>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Guardar</button>
    </div>
</form>
{% endblock %}